<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manus.ai - Manager (Gold)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #f8fafc; }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1e293b; }
    ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #64748b; }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 900: '#0c4a6e' },
            dark: { 800: '#1e293b', 900: '#0f172a' }
          }
        }
      }
    }
  </script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // --- ICONS ---
    const Icon = ({ name, size = 20, className = "" }) => {
      const icons = {
        shield: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />,
        key: <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />,
        dashboard: <path d="M3 3h7v7H3V3zm11 0h7v7h-7V3zm0 11h7v7h-7v-7zM3 14h7v7H3v-7z" />,
        server: <path d="M2 12h20M2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M2 12V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v6" />,
        plus: <path d="M12 5v14M5 12h14" />,
        trash: <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />,
        copy: <path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M16 4h2a2 2 0 0 1 2 2v4M21 14H11" />,
        refresh: <path d="M23 4v6h-6M1 20v-6h6" />,
        logout: <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9" />,
        lock: <path d="M19 11H5m14 0a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2m14 0V9a7 7 0 0 0-14 0v2" />,
        cloud: <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" />,
        help: <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM12 17h.01M12 14v-2a2 2 0 0 1 2-2 2 2 0 0 0-2-2" />,
        warning: <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4m0 4h.01" />,
        check: <path d="M20 6L9 17l-5-5" />,
        shieldAlert: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />,
        card: <path d="M21 4H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM2 10h20M7 15h4" />,
        terminal: <path d="M4 17l6-6-6-6M12 19h8" />,
        fileWarning: <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M12 9v4"/><path d="M12 17h.01"/>
      };
      return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{icons[name] || <circle cx="12" cy="12" r="10" />}</svg>;
    };

    const QRCodeDisplay = ({ value }) => {
      const qrRef = useRef(null);
      useEffect(() => {
        if (qrRef.current) {
          qrRef.current.innerHTML = "";
          try { new QRCode(qrRef.current, { text: value, width: 180, height: 180, colorDark : "#000000", colorLight : "#ffffff", correctLevel : QRCode.CorrectLevel.M }); } catch(e) {}
        }
      }, [value]);
      return <div className="bg-white p-4 rounded shadow-lg mx-auto w-fit" ref={qrRef}></div>;
    };

    // --- LOGIC ---
    const MASTER_KEY = "manus-admin-2024";
    const SALT = "manus_secret_salt_v1";

    const generateLicense = (c, d) => { const e = new Date(); e.setDate(e.getDate() + parseInt(d)); const p = { c, e: e.getTime(), s: btoa(c + e.getTime() + SALT) }; return btoa(JSON.stringify(p)); };
    const validateLicense = (k) => {
      if (!k) return null; if (k === MASTER_KEY) return { type: 'admin', name: 'Admin' };
      try { const p = JSON.parse(atob(k)); if (p.s !== btoa(p.c + p.e + SALT) || Date.now() > p.e) return null; return { type: 'client', name: p.c }; } catch { return null; }
    };
    const generateWGKey = () => { const b = new Uint8Array(32); window.crypto.getRandomValues(b); return btoa(String.fromCharCode(...b)); };
    const getPublicIP = async () => { try { return (await (await fetch('https://api.ipify.org?format=json')).json()).ip; } catch { return 'SEU_IP_AQUI'; } };
    const getAgents = () => JSON.parse(localStorage.getItem('manus_agents_v3') || '[]');
    const saveAgent = (a) => { const l = getAgents(); localStorage.setItem('manus_agents_v3', JSON.stringify([...l.filter(x => x.id !== a.id), a])); };
    const deleteAgent = (id) => localStorage.setItem('manus_agents_v3', JSON.stringify(getAgents().filter(a => a.id !== id)));

    // --- VIEWS ---

    const Troubleshooting = ({ onBack }) => (
      <div className="space-y-6">
        <h2 className="text-2xl font-bold text-white flex gap-2"><Icon name="help"/> Ajuda & Diagnóstico</h2>
        
        <div className="grid gap-6 md:grid-cols-2">
          <div className="bg-dark-900 border border-slate-700 p-6 rounded-xl">
            <h3 className="text-red-400 font-bold mb-2">Erro: Handshake did not complete</h3>
            <p className="text-sm text-slate-300 mb-2">O sinal não está chegando no servidor.</p>
            
            <div className="bg-red-900/20 p-4 rounded border border-red-500/30 mb-4">
               <h4 className="text-red-200 font-bold text-sm mb-2 flex items-center gap-2"><Icon name="shieldAlert" size={16}/> Windows Firewall</h4>
               <p className="text-xs text-red-100 mb-2">Se estiver usando Modo Direto, desative o Firewall do Windows.</p>
            </div>
            
             <div className="bg-blue-900/20 p-4 rounded border border-blue-500/30">
               <h4 className="text-blue-200 font-bold text-sm mb-2 flex items-center gap-2"><Icon name="key" size={16}/> Chave Incorreta</h4>
               <p className="text-xs text-blue-100 mb-2">Se você não copiou a Public Key do servidor para o App, a conexão falha. Certifique-se de preencher o campo "Validação de Chave".</p>
            </div>
          </div>
          
          <div className="bg-dark-900 border border-slate-700 p-6 rounded-xl">
            <h3 className="text-purple-400 font-bold mb-2">Diagnóstico Oracle</h3>
            <p className="text-sm text-slate-300 mb-4">
              Se a Regra de Segurança está certa (UDP 51820) e ainda não vai:
            </p>
            
            <div className="bg-black/40 p-4 rounded border border-slate-600 mb-4">
               <h4 className="text-white font-bold text-sm mb-2 flex items-center gap-2">
                 <Icon name="terminal" size={16} /> Comandos de Teste (SSH)
               </h4>
               
               <div className="bg-yellow-900/20 p-2 rounded mb-3 border border-yellow-500/20">
                 <p className="text-[10px] text-yellow-200 flex gap-2">
                   <Icon name="warning" size={12} className="shrink-0 mt-0.5"/>
                   <span><strong>Erro "Sudo desabilitado"?</strong><br/>Significa que você está no Windows. Reconecte o SSH!</span>
                 </p>
               </div>

               <p className="text-xs text-slate-400 mb-2">Rode na tela preta para ver se o programa está vivo:</p>
               <code className="block bg-black p-2 rounded text-green-400 text-xs font-mono select-all mb-3">sudo wg show</code>
               
               <div className="bg-red-900/10 p-2 rounded border border-red-500/20 mb-3">
                  <p className="text-[10px] uppercase text-red-400 font-bold flex gap-1 items-center"><Icon name="fileWarning" size={12}/> Se não aparecer NADA:</p>
                  <p className="text-[10px] text-slate-400 mb-1">O serviço está desligado. Tente ligar:</p>
                  <code className="block bg-black p-1 rounded text-red-300 text-xs font-mono select-all">sudo systemctl restart wg-quick@wg0</code>
                  <p className="text-[10px] text-slate-400 mt-1">Se der erro, verifique os logs:</p>
                  <code className="block bg-black p-1 rounded text-white text-xs font-mono select-all">sudo systemctl status wg-quick@wg0</code>
               </div>

               <p className="text-xs text-slate-400 mb-1">Forçar Firewall Interno:</p>
               <code className="block bg-black p-2 rounded text-yellow-400 text-xs font-mono select-all">sudo iptables -I INPUT -p udp --dport 51820 -j ACCEPT</code>
            </div>
          </div>
        </div>
        <button onClick={onBack} className="text-slate-400 hover:text-white">Voltar</button>
      </div>
    );

    const AgentWizard = ({ onCancel, onFinish }) => {
      const [mode, setMode] = useState('direct');
      const [step, setStep] = useState(1);
      const [ip, setIp] = useState('');
      const [keys, setKeys] = useState({});
      const [manualPubKey, setManualPubKey] = useState('');
      
      useEffect(() => {
        setKeys({ sk: generateWGKey(), pk: generateWGKey(), ck: generateWGKey() });
        if(mode==='direct') getPublicIP().then(setIp); else setIp('');
      }, [mode]);

      const winConf = `[Interface]\nPrivateKey = ${keys.sk}\nAddress = 10.10.0.1/24\nListenPort = 51820\nDNS = 8.8.8.8\n\n[Peer]\nPublicKey = ${keys.pk}\nAllowedIPs = 10.10.0.2/32`.trim();
      const targetPubKey = manualPubKey; // Always rely on manual entry for robust handshake
      const mobConf = `[Interface]\nPrivateKey = ${keys.ck}\nAddress = 10.10.0.2/32\nDNS = 1.1.1.1\n\n[Peer]\nPublicKey = ${targetPubKey}\nEndpoint = ${ip}:51820\nAllowedIPs = 0.0.0.0/0\nPersistentKeepalive = 25`.trim();
      
      const oracleScript = `#!/bin/bash
# -----------------------------------------------
# MANUS.AI - AUTO SETUP (UBUNTU)
# -----------------------------------------------
apt update && apt install -y wireguard iptables-persistent

# Detect Default Interface (Robust Method)
DEFAULT_IF=$(ip route show default | awk '/default/ {print $5}')

# Habilitar Forwarding
sed -i 's/#net.ipv4.ip_forward=1/net.ipv4.ip_forward=1/g' /etc/sysctl.conf
sysctl -p

# Configurar WireGuard
cat > /etc/wireguard/wg0.conf <<EOF
[Interface]
PrivateKey = ${keys.sk}
Address = 10.10.0.1/24
ListenPort = 51820
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o $DEFAULT_IF -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o $DEFAULT_IF -j MASQUERADE

[Peer]
# Mobile
PublicKey = ${keys.pk}
AllowedIPs = 10.10.0.2/32
EOF

# Liberar Firewall Local (UFW) se existir
if command -v ufw > /dev/null; then
  ufw allow 51820/udp
  ufw allow OpenSSH
fi

# Salvar regras
iptables -I INPUT -p udp --dport 51820 -j ACCEPT
netfilter-persistent save

systemctl enable wg-quick@wg0
systemctl restart wg-quick@wg0

# CALCULAR E EXIBIR A CHAVE PÚBLICA REAL
SERVER_PUB_KEY=$(echo "${keys.sk}" | wg pubkey)

echo ""
echo "========================================================"
echo "✅ INSTALAÇÃO CONCLUÍDA NA NUVEM!"
echo "========================================================"
echo "COPIE A CHAVE ABAIXO E COLE NO APP MANUS:"
echo ""
echo "$SERVER_PUB_KEY"
echo ""
echo "========================================================"
`.trim();

      return (
        <div className="bg-dark-900 border border-slate-700 rounded-xl overflow-hidden p-6">
          <div className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
            <h2 className="font-bold text-white text-xl">Nova Conexão</h2>
            <div className="flex gap-2 text-xs">
               <button onClick={()=>setMode('direct')} className={`px-3 py-1 rounded ${mode==='direct'?'bg-brand-600 text-white':'bg-slate-800 text-slate-400'}`}>Direto</button>
               <button onClick={()=>setMode('cloud')} className={`px-3 py-1 rounded ${mode==='cloud'?'bg-purple-600 text-white':'bg-slate-800 text-slate-400'}`}>VPS Nuvem</button>
            </div>
          </div>

          {step === 1 && (
            <div className="space-y-4">
               <p className="text-slate-400 text-sm">{mode==='direct'?'Detectamos seu IP. Garanta que a porta 51820 UDP está aberta no Roteador.':'Crie sua máquina na Oracle (Ubuntu 22.04) e cole o IP Público abaixo:'}</p>
               
               {mode === 'cloud' && (
                 <div className="bg-blue-900/20 p-3 rounded border border-blue-500/30 text-xs text-blue-200 flex gap-2 items-start">
                    <Icon name="card" size={16} className="shrink-0 mt-0.5" />
                    <div>
                      <strong>Aviso Oracle Cloud:</strong> Escolha a imagem <strong>Ubuntu 22.04</strong>. O script é otimizado para ele.
                    </div>
                 </div>
               )}

               <input value={ip} onChange={e=>setIp(e.target.value)} className="w-full bg-black border border-slate-600 rounded p-2 text-white font-mono" placeholder={mode==='cloud'?'Ex: 150.10.20.30':''} />
               <div className="flex justify-end gap-2 mt-4">
                 <button onClick={onCancel} className="text-slate-400 px-4">Cancelar</button>
                 <button onClick={()=>setStep(2)} disabled={!ip} className="bg-brand-600 text-white px-6 py-2 rounded">Próximo</button>
               </div>
            </div>
          )}

          {step === 2 && (
             <div className="space-y-4">
               {mode === 'direct' ? (
                 <>
                   <p className="text-slate-400 text-sm">Cole no WireGuard Windows e clique em <strong>Save</strong> e <strong>Activate</strong>.</p>
                   <textarea readOnly value={winConf} className="w-full h-32 bg-black text-green-400 text-xs font-mono p-4 rounded border border-slate-700 resize-none" onClick={e=>e.target.select()}></textarea>
                 </>
               ) : (
                 <>
                   <p className="text-slate-400 text-sm">Acesse sua VPS (SSH), vire root (<code>sudo -i</code>) e cole:</p>
                   <textarea readOnly value={oracleScript} className="w-full h-32 bg-black text-purple-400 text-xs font-mono p-4 rounded border border-slate-700 resize-none" onClick={e=>e.target.select()}></textarea>
                   <div className="bg-yellow-900/20 p-2 rounded border border-yellow-500/30 text-xs text-yellow-200 mt-2">
                      <strong>Importante:</strong> Ao final da instalação, <strong>copie a chave que aparecerá na tela preta</strong>.
                   </div>
                 </>
               )}
               <div className="flex justify-between mt-4">
                 <button onClick={()=>setStep(1)} className="text-slate-400">Voltar</button>
                 <button onClick={()=>setStep(3)} className="bg-brand-600 text-white px-6 py-2 rounded">Próximo</button>
               </div>
             </div>
          )}

          {step === 3 && (
            <div className="space-y-4">
              <div className="bg-blue-900/20 border border-blue-500/30 p-4 rounded-lg mb-4">
                  <h4 className="text-blue-300 font-bold text-sm mb-2 flex gap-2"><Icon name="key"/> Validação de Chave (Obrigatório)</h4>
                  <p className="text-slate-400 text-xs mb-3">
                    {mode === 'direct' 
                      ? 'No Windows (Interface), copie a Public Key e cole abaixo:' 
                      : 'Na tela preta da Oracle (SSH), copie a chave que apareceu no final e cole abaixo:'}
                  </p>
                  <input value={manualPubKey} onChange={e=>setManualPubKey(e.target.value)} placeholder="Cole a Public Key aqui..." className="w-full bg-black border border-blue-500/50 rounded p-3 text-white font-mono text-xs focus:ring-2 focus:ring-blue-500 outline-none" />
              </div>
              
              {manualPubKey.length > 10 ? (
                <div className="text-center">
                  <p className="text-slate-400 text-sm mb-4">Escaneie com o Celular:</p>
                  <QRCodeDisplay value={mobConf} />
                  <div className="bg-brand-900/40 p-3 rounded border border-brand-500/30 text-xs text-slate-300 text-left mt-4">
                    <strong>Teste Final:</strong> Desligue o Wi-Fi e teste no 4G.
                  </div>
                </div>
              ) : (
                 <div className="text-center p-8 text-slate-500 bg-black/20 rounded-lg border border-slate-800">Cole a chave pública acima para gerar o QR Code.</div>
              )}

              <div className="flex justify-between mt-6">
                <button onClick={()=>setStep(2)} className="text-slate-400">Voltar</button>
                <button onClick={()=>onFinish({id:Date.now(), name:mode==='direct'?'Casa':'VPS', ip, mode})} disabled={manualPubKey.length<10} className="bg-green-600 text-white px-6 py-2 rounded flex gap-2 mx-auto disabled:opacity-50"><Icon name="check"/> Salvar</button>
              </div>
            </div>
          )}
        </div>
      );
    };

    const Dashboard = ({ user, onLogout }) => {
      const [agents, setAgents] = useState(getAgents());
      const [view, setView] = useState('list');
      return (
        <div className="flex min-h-screen">
          <aside className="w-64 bg-dark-900 border-r border-slate-700 hidden md:flex flex-col p-4">
            <div className="flex items-center gap-2 text-white font-bold text-xl mb-8"><div className="bg-brand-600 p-1 rounded"><Icon name="shield" className="text-white"/></div> Manus.ai</div>
            <nav className="space-y-2 flex-1">
              <div onClick={()=>setView('list')} className={`flex gap-3 px-4 py-2 rounded cursor-pointer ${view==='list'?'bg-brand-900/30 text-brand-400':'text-slate-400'}`}><Icon name="dashboard"/> Dashboard</div>
              <div onClick={()=>setView('help')} className={`flex gap-3 px-4 py-2 rounded cursor-pointer ${view==='help'?'bg-brand-900/30 text-brand-400':'text-slate-400'}`}><Icon name="help"/> Ajuda / Erros</div>
            </nav>
            <button onClick={onLogout} className="flex gap-3 text-red-400 px-4 py-2 hover:bg-red-900/20 rounded"><Icon name="logout"/> Sair</button>
          </aside>
          <main className="flex-1 p-8 overflow-y-auto">
            {view === 'help' && <Troubleshooting onBack={()=>setView('list')} />}
            {view === 'create' && <AgentWizard onCancel={()=>setView('list')} onFinish={(a)=>{ saveAgent(a); setAgents(getAgents()); setView('list'); }} />}
            {view === 'list' && (
              <>
                <header className="flex justify-between items-center mb-8">
                  <h1 className="text-2xl font-bold text-white">Olá, {user.name}</h1>
                  <button onClick={()=>setView('create')} className="bg-brand-600 hover:bg-brand-500 text-white px-4 py-2 rounded flex gap-2"><Icon name="plus"/> Nova Conexão</button>
                </header>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                  <div className="bg-dark-900 p-6 rounded-xl border border-slate-700"><p className="text-slate-400 text-xs uppercase font-bold">Ativos</p><p className="text-3xl text-white font-bold">{agents.length}</p></div>
                </div>
                <div className="space-y-4">
                  {agents.map(a => (
                    <div key={a.id} className="bg-dark-900 p-4 rounded-xl border border-slate-700 flex justify-between items-center">
                       <div className="flex gap-4 items-center">
                          <div className={`w-10 h-10 rounded-full flex items-center justify-center ${a.mode==='cloud'?'bg-purple-900/30 text-purple-400':'bg-brand-900/30 text-brand-400'}`}><Icon name={a.mode==='cloud'?'cloud':'server'} /></div>
                          <div><h3 className="font-bold text-white">{a.name}</h3><p className="text-xs text-slate-500 font-mono">{a.ip}</p></div>
                       </div>
                       <button onClick={()=>{if(confirm('Apagar?')) {deleteAgent(a.id); setAgents(getAgents());}}} className="text-slate-600 hover:text-red-400"><Icon name="trash"/></button>
                    </div>
                  ))}
                </div>
              </>
            )}
          </main>
        </div>
      );
    };

    const Login = ({ onLogin }) => {
      const [k, setK] = useState(''); const [e, setE] = useState('');
      return (
        <div className="min-h-screen bg-dark-800 flex items-center justify-center p-4">
          <div className="w-full max-w-md bg-dark-900 border border-slate-700 p-8 rounded-2xl">
             <div className="flex justify-center mb-6"><div className="w-16 h-16 bg-brand-600 rounded-2xl flex items-center justify-center"><Icon name="shield" size={40} className="text-white"/></div></div>
             <h1 className="text-2xl font-bold text-center text-white mb-6">Acesso Manus.ai</h1>
             <input className="w-full bg-black border border-slate-600 rounded p-3 text-white text-center mb-4 outline-none focus:border-brand-500" placeholder="Chave de Licença" value={k} onChange={e=>setK(e.target.value)} />
             {e && <p className="text-red-400 text-sm text-center mb-4">{e}</p>}
             <button onClick={()=>{ const r=validateLicense(k.trim()); if(r && r.type!=='expired') onLogin(r); else setE('Chave inválida'); }} className="w-full bg-brand-600 text-white font-bold py-3 rounded">Entrar</button>
          </div>
        </div>
      );
    };

    const LicenseGen = () => {
      const [n, setN] = useState(''); const [d, setD] = useState(30); const [k, setK] = useState('');
      return (
        <div className="min-h-screen bg-dark-800 p-8"><div className="max-w-xl mx-auto space-y-4"><h1 className="text-white font-bold text-2xl mb-4">Gerador Admin</h1><input className="w-full bg-black border border-slate-700 rounded p-2 text-white" placeholder="Nome" value={n} onChange={e=>setN(e.target.value)} /><input type="number" className="w-full bg-black border border-slate-700 rounded p-2 text-white" value={d} onChange={e=>setD(e.target.value)} /><button onClick={()=>setK(generateLicense(n,d))} className="w-full bg-green-600 text-white font-bold py-2 rounded">Gerar</button>{k && <textarea readOnly className="w-full h-24 bg-black text-slate-300 text-xs p-2 rounded border border-brand-500" value={k} onClick={e=>e.target.select()} />}</div></div>
      );
    };

    const App = () => {
      const [u, setU] = useState(null);
      if (!u) return <Login onLogin={setU} />;
      if (u.type === 'admin') return <LicenseGen />;
      return <Dashboard user={u} onLogout={()=>setU(null)} />;
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
